# <span style="color: #ce1403; font-weight: Bold">Django</span>

### <span style="color: #ebce14;">A simple Django project</span>

- A full-featured web application by Django

## <span style="color: #44cecc;">Tutorial's Notes</span>

### <span style="color: #03ce14;">Getting started</span>

- <span style="color: Red;">Installation Instruction</span>
  - Install python
  - install pip
  - install git
  - Add git directory to windows environment variables path
  - ![](NoteImages/1.png)
  - Create repository on GitHub (django_project)
  - Edit README.md file
  - Create ssh key by using 'ssh-keygen' on cmd or terminal
  - Open ssh-key file and copy code
  - Create a new ssh key on GitHub
  - Add Tutor as collaborator on project
  - install Django using pip
  - Check django-admin
  - Start a new project by django-admin-> 'django-admin startproject django-project'
  - change the project name temporary
  - Download project from GitHub-> 'git clone ...'
  - Copy all file from django directory to cloned directory
  - Run server for the first time
  - Open project directory in vscode and run server again (localhost ip address)
  - Adjust .gitignor file
  - Edit git config and create first git commit and push to server
  - Now Everything is OK
- <span style="color: Red;">Django</span>
  - Django is a back-end server side web framework.
  - Other backend frameworks like flask, pyramid, ...
  - Django is free, open source and written in Python.
  - Django makes it easier to build web pages using Python.
  - <span style="color: #00dd99;">Django emphasizes **reusability** of components, also referred to as **DRY** (Don't Repeat Yourself), and comes with **ready-to-use** features like login system, database connection and CRUD operations (Create Read Update Delete).</span>
  - Django is especially helpful for database driven websites
- <span style="color: Red;">How does Django Work?</span>
  - Django follows the <span style="color: Red;">MVT</span> design pattern (Model View Template).
  - ![](NoteImages/2.png)
  - Model - The data you want to present, usually data from a database. <span style="color: Red;">model.py</span>
  - View - A request handler that returns the relevant template and content - based on the request from the user. <span style="color: Red;">view.py</span>
  - Template - A text file (like an HTML file) containing the layout of the web page, with logic on how to display the data. <span style="color: Red;">templates</span>
  - URL - Django also provides a way to navigate around the different pages in a website <span style="color: Red;">urls.py</span>
- <span style="color: Red;">So, What is Going On?</span>
  <ol>
  <li>Django receives the URL, checks the urls.py file, and calls the view that matches the URL.</li>
  <li>The view, located in views.py, checks for relevant models.</li>
  <li>The models are imported from the models.py file.</li>
  <li>The view then sends the data to a specified template in the template folder.</li>
  <li>The template contains HTML and Django tags, and with the data it returns finished HTML content back to the browser.</li></ol>
- <span style="color: Red;">Default Files</span>
  - <span style="color: Red;">manage.py</span> : Our main file that start pur application
  - The inner directory is core of our project
  - <span style="color: Red;">**init**.py</span> : make a python package
  - <span style="color: Red;">settings.py</span> : where are we able to change some project settings
  - <span style="color: Red;">urls.py</span> : where are we set our mapping system
  - <span style="color: Red;">wsgi.py</span> : (django web server)Where are our django project library settings and we never touch it.
  - check admin page to show urls.py functionality
- <span style="color: Red;">Create App</span>
  - An app is a web application that has a specific meaning in your project, like a home page, a contact form, or a members database.
  - ![](NoteImages/3.png)
  - We create an app using this command : <span style="color: orange;">"python manage.py startapp -app name- "
  - This command create a directory that contain necessary files for our blog
- <span style="color: Red;">Views</span>
  - Django views are Python functions that takes http requests and returns http response, like HTML documents.
  - A web page that uses Django is full of views with different tasks and missions.
  - We should create a view function in view.py file name <span style="color: Red;">'home'</span>
- <span style="color: Red;">Urls.py</span>
  - Create a file named <span style="color: Red;">urls.py</span> in the same folder as the views.py file
  - The urls.py file you just created is specific for the blog application
  - To use that we should copy <span style="color: blue;">path</span> import from project <span style="color: Red;">urls.py</span> file to our app <span style="color: Red;">urls.py</span> file and <span style="color: orange;">urlpatterns</span>
  - After that we should import our project view to urls.py(app) and create a route for our app home page.
  - Then we include our app <span style="color: orange;">urls.py</span> to project <span style="color: orange;">urls.py</span>
  - Django when check a patter and find one match and chops our url and send not matches part with request.
  - Run server again and check url patterns separately and check sources
  - Outline : user-url -> project-urls -> blog(app)-urls -> an empty string has been sended -> views.py -> home function -> its return a HttpResponse
  - Do same process for about page
  - Check url by changing in urls.py(pro) and check patterns blog -> blog_app
  - After change <span style="color: orange;">'blog/'</span> our project urls to <span style="color: orange;">' '</span> , our Project home page change to blog home page.
- <span style="color: Red;">Templates</span>
  - To return more complex html file we should create templates starting by create templates folder inside our blog app
  - We can't embed all html code inside **HttpRequest** method
  - Based of the Django Conventions we should create a folder inside templates folder named blog(our app name)
  - After that we should add our template files and name those based on our routes that has existed in views.py file
  - Add some Basic html code inside them
  - Now we need to add our blog application <span style="color: orange;">(in app.py)</span> to the list of our installed app <span style="color: Orange;">(in project settings.py)</span> to Django search for templates directory
  - ![](NoteImages/4.png)
  - After register our app by adding it in the project, Django search for templates, models, or anything related to our blog app inside blog directory
  - New we should define how to our route function load their specific template (also we can load and the return http request)
  - ![](NoteImages/5.png)
  - Do all things for about page as well.
- <span style="color: Red;">Passing data to Templates</span>
  - We can pass data by creating fake data and send the in dictionary form to template as third argument for render method
  - Django making template engine is something like Jinja2 that lets us to write python code inside html document
  - For writing a code block inside html doc we should use this pattern : <span style="color: Orange;">{% Our python code %}</span>
  - For accessing a variable inside html doc we should use this pattern : <span style="color: Orange;">{{ Our python variable }}</span>
  - In vscode by converting language mode to Django template helps us to write Django code easily
  - we can embed a python code (if statement) to manage our home page <span style="color: Red;">title</span>
- <span style="color: Red;">Template Inheritance</span>
  - To escape of writing duplicated code for all templates we can use template inheritance to make it easy to change common elements of all templates
  - We can do it by defining a <span style="color: Green;">base.html</span> file and make it a parent class for all other templates
  - We can import a <span style="color: Green;">block content</span> to our base.html to make a section that our child template can overwrite
  - Then we need to remove all information that is in our base.html from other templates
  - After that we need to extend the base.html codes to other templates by adding <span style="color: Red;">extend block</span> to them and a <span style="color: Red;">content block</span>
- <span style="color: Red;">Bootstrap</span>
  - We use Bootstrap to add some nice style to our website
  - Bootstrap is <span style="color: Pink;">Frontend framework</span> and we need to pass a crash course trough the internet to work with
  - By adding Bootstrap <span style="color: Red;">meta links</span> and <span style="color: Red;">javascript links</span>, we can use this libraries through the <span style="color: Red;">Content Delivery Network (CDN)</span> ability.
  - Template inheritance helps us to use bootstrap in all pages in our website
  - We need to copy Bootstrap <span style="color: Yellow;">starter meta codes</span> inside the head section of base.html file and bootstrap <span style="color: Yellow;">starter javascript code</span> at the end of this file before closing body tag
  - After that we need to warp our content block inside a <span style="color: Red;">div</span> that uses <span style="color: Yellow;">container</span> class
  - Check page source to show HTML code
  - Then we need to add some HTML code to our base.html file to make it stylish <span style="color: Red;">(header and main section)</span>
  - Then we need some custom style base on our bootstrap specific
  - We should create <span style="color: Red;">main.css</span> file inside <span style="color: Yellow;">Static /blog</span> directory in our <span style="color: Red;">app</span>
  - After copy all css codes inside main.css we need to include that into our base template by referencing it and <span style="color: Red;">load static code block</span >
  - And after that we need to create link to our static file inside head tag
  - After that we should put our article code to a specific blog so we put it in for loop of blog post in home template
  - At the end for separating our blog home of other apps home we should define url pattern in href of navigation bar to avoid hard coding(and explain name tag in url pattern)
- <span style="color: Red;">Admin Page</span>
  - Before migration creating a super user and entering to admin page is impossible
  - Explain the red error that shows after running server
  - First we should use <span style="color: Red;">makemigrations</span> command following <span style="color: Yellow;">'python manage.py'</span>
  - Second we should use <span style="color: Red;">migrate</span> command to create all essential and initial tables inside the database that have been created inside the default Django Database
  - After that we can create our super user and log in as admin inside Django admin page
  - In groups sections we can manage our admin users group
  - In user section we can see all admin user of our site
  - We can add a new user for test
- <span style="color: Red;">Database</span>
  - Django has its own <span style="color: Red;">ORM (Object Relational Mapper)</span> And its make it easy to access to our date base and easy to use it in Object Oriented way
  - Its allows us to use different databases without changing our code
  - We can represent our database structures as classes and we call that classes, <span style="color: Red;">Models</span>
  - We define our models inside <span style="color: Red;">models.py</span> file in our blog app
  - Django has its built-in user authentication system and we don't need to define user model
  - We can create all fields that we need for our entity inside of our database inside a model class
  - Model classes inherit from models class in Django
  - Actually we define all fields of our table using methods of models class
  - <span style="color: Red;">Max_length</span> define the maximum number of characters that our field can have
  - We use <span style="color: Red;">timezone</span> utility to be able to edit our DateTime field later
  - We create a <span style="color: Red;">foreign key</span> for user field and make relationship between our Post table and User table
  - We use <span style="color: Red;">on_delete</span> option to tell Django what happen to this posts, when the user who create this post gets deleted
  - By using <span style="color: Red;">makemigrations</span> command, we apply all our changes to the database
  - We can find migrations files inside migrations directory inside our blog app
  - We can check all sql statement that Django used to build up our table inside database, by using this command: <span style="color: Red;">python manage.py sqlmigrate blog -migration name-</span> without postfix
  - We can check and update our database using <span style="color: Orange;">shell</span> command following python manage.py
  - Migration allows us to update our database after creation or put data in it
  - Inside the shell environment we should import our User and Post models first (from blog.models import ...)
  - <span style="color: Red;">"from django.contrib.auth.models import User"</span>
  - We can check all objects in User table by this command: <span style="color: Red;">User.objects.all()</span> or User.objects.first() or last() (for the last one)
  - Also we can use filter() method base on the fields like user name
  - <span style="color: Yellow;">User.objects.filter(username='testuser')</span> / .first()
  - We can save queries in a variable and use it for checking its attributes
  - We can get a user by its id : <span style="color: Yellow;">User.objects.get(id=1)</span>
  - To create a post we can use <span style="color: Yellow;">post_1 = Post(...)</span> command and <span style="color: Yellow;">save</span> it finally
  - In order to help our post model present itself better, we can add a magic method to our post model using dander sign
  - To apply all changes and create backup we should exit shell and run it again
  - Notice, after rerun shell we should create our user again
  - After create two post we can save a post in a variable and show its attributes like **date_posted** / even user email (Its happened because foreign_key feature)
  - Django has a feature that helps us to easily access to all posts of a user. <span style="color: Red;">\_set.all()</span>
  - By using this feature we can create a new post for a specific user easily <span style="color: Red;">\_set.create(...)</span> / without specifying author
  - Now we can use our database information instead of dumpy data by importing Post from models and send info to home.html
  - We can use vertical bar to filter our date to a desirable form |date:"F d, Y"
  - We can add our new post model to Django gui interface by register it in <span style="color: Red;">admin.py</span> file, using this code: <span style="color: Red;">admin.site.register(Post)</span>
- <span style="color: Red;">User Registration</span>
  - First of all we create a new app for our site users
  - Register New app in django project settings
  - Create view for our users app registration page
  - Django make it easy to create a validation or insert value form. (Django Built it automatically)
  - First we should create and register a new app (users)
  - Then we should create a view for our registration page (using built-in features of THe Django)
  - After that we need to create a template for our registration page inside the new app folder base on Django conventions
  - We should extend our base.html templates there and get some nice style to it
  - We should add a <span style="color: Red;">csrf_token (Cross Site Request Forgery)</span> to our form to protect it from some kind of attacks
  - Explain some Bootstrap css classes like <span style="color: Red;">mb-4</span> or <span style="color: Red;">pt-2</span>
  - Now we need to make a url pattern for this registration page
  - We should import our users app views to our project urlpattern file and check it by running server.
  - To make it better in style we should run our form elements as paragraph tag by using <span style="color: Red;">as_p</span> at end of our form name
  - After that we should talk about HTTP methods and manage our form <span style="color: Red;">POST</span> requests
  - Then we need to define variables to get form data clearly and show <span style="color: Red;">flash message(One time alert message)</span> by import <span style="color: Red;">messages</span> from Django. Here is the some of flash messages:
    - messages.debug
    - messages.info
    - messages.success
    - messages.warning
    - messages.error
  - After that we should redirect user to home page by importing <span style="color: Red;">redirect</span> method
  - Before check the flash message we need to define it in our base.html file
  - We should get message there and show it to user by Django For And if statements and Bootstrap
  - By using <span style="color: Red;">save()</span> method we can save our new user
  - To customize our user registration form we should built a new file in our user app root directory named <span style="color: Red;">forms.py</span> to make our desire form
  - <span style="color: Red;">Meta class</span> actually gives us a nested namespace or configurations that says what model that would be effected and define which model would be effected and in what order
  - To get a good and suitable shape to our form we use a third-party app name <span style="color: Red;">crispy-forms and crispy-bootstrap5</span> (first we should install it using pipenv) - after install we should register both of them in the Django settings file
  - In register template we nee to load <span style="color: Red;">crispy_forms_tags</span>
  - In page source we can check all bootstrap
- <span style="color: Red;">Login and Logout System</span>
  - Django provide views for us to handel Log in and Log out process
  - We should import Django auth views for Login and Logout in project urls.py file
  - By adding login and logout urlpatterns we can use these built-in forms
  - We need to change Django default login and logout template location inside the <span style="color: Red;">as_view()</span>
  - After creating login and logout html file inside the users app templates, we need to copy all codes inside the register template to these files
  - After loading the login page we need to redirect page
